# 1.人工智能及其用例介绍

在医疗保健领域，关于人工智能(AI)的讨论在过去几年中一直在增加。因此，医疗保健专业人员正在积极考虑使用这一卓越的工具来创建新的解决方案，使临床医生和患者都能受益。然而，在开发这些应用程序的过程中，个人经常会面临几个问题，其中最重要的可能是“我真的需要人工智能吗？”要回答这个问题，我们必须了解什么是高层次之外的人工智能。不幸的是，绝大多数面向初学者的人工智能资源都停留在对人工智能的概括概述上，而没有谈到如何实现它。更先进的材料是不透明的，数学上是密集的，并且经常是面向经验丰富的程序员和计算机科学家。这本书的目的是让读者了解人工智能实际上是什么，它是如何工作的，以及如何以初学者(具有医疗保健/医学背景)可以接受的方式编写基于人工智能的算法。但是，在我们能够进入人工智能及其机制的细节之前，我们需要建立人工智能实际上是什么的基本事实定义，并建立什么样的问题将受益于人工智能方法背后的逻辑。记住这一点，让我们从谈论医疗保健界面临的一个悖论开始:信息太多，却不知道如何处理。

## 医疗保健信息悖论

医疗保健领域正变得越来越技术化。使用电子健康记录、患者管理、图片和图像存档系统等意味着以前用笔和纸保存患者记录的方法已经过时了。然而，这些跟踪患者数据的新方法意味着医疗保健机构现在有了一种以更轻松的方式处理所有这些数字化信息的方法。就在 20 年前，甚至在一个机构进行分析大量患者数据的研究都令人望而生畏，因为个人患者报告必须被转录、整理、分组(如果有多次就诊)、以某种方式标准化、过滤无关条件等。现在，如果研究人员或医护人员想要收集一组患者的信息，只需点击几下鼠标就可以开始分析。

这是个好消息，但是我们该如何利用这些信息呢？如果我们有一个给定病人的病史的每一个方面的数据，一个研究人员如何确定哪些因素与分析相关？例如，如果有人想预测患者是否可能患糖尿病，首先要考虑的几个因素是他们的血糖含量、年龄和体重。但是这些都是因素吗？我们能收集更多关于他们家族史的信息吗？他们的身体质量指数如何，而不仅仅是他们的体重？糖化血红蛋白呢？关于他们以前的状况、饮食、急诊室就诊频率、杂货店附近等信息呢？所有这些因素都可能导致某人患糖尿病。然而，当我们试图提出一组“是/否”的陈述来判断某人是否可能患上某种疾病时，人们很快就无法确定这些因素中的哪些因素起了重要作用，以及一个因素如何与另一个因素相互作用。

这就是人工智能(AI)领域的技术可能派上用场的地方。具体来说，这些算法可以“学习”如何对风险状态做出决定，对我们对患者的每个特征进行加权，以最大限度地提高预测的整体准确性。这种方法说明了 AI 如何帮助解决医学相关的问题(这里是预测风险的问题)。但 AI 不一定是所有情况下的最佳解决方案。我们真的需要了解什么是人工智能，以及什么时候实际使用它最合适，然后我们才能考虑使用编码来解决可能需要使用人工智能的医疗问题。

## 人工智能、人工智能、深度学习、大数据:这些流行语是什么意思？

到目前为止，我们已经谈论了一些“人工智能”这个术语，但是一个立即浮现在脑海中的问题是，“人工智能是什么？”如果不深入研究非人工智能程序是如何工作的，这个问题就有点难以回答。

想象一下你要计算一个病人的身体质量指数。根据定义，这只是 weight(kg)/(height(m))^2.这是一个非常简单的计算，任何人都可以用手算出来。如果以磅和英寸给出重量，我们可以应用 CDC 推荐的 703 * weight(lbs)/(height(in))^2.公式由于我们知道计算这一数量的精确公式，报告患者的身体质量指数就像在计算器中输入患者的体重和身高并报告数字一样简单。这是我们不用人工智能就能轻松完成的事情，因为这是一个已经设定好参数的简单计算。如果我们需要确定某人是否体重不足、正常、超重或肥胖，我们根据 CDC 指南报告他们的状况(如果身体质量指数< 18.5，则体重不足；如果身体质量指数≥ 18.5 且< 25，则正常；如果≥ 25 且< 30，则超重；如果≥ 30，则肥胖)。为了简单起见，让我们写下到目前为止我们已经讨论过的内容:

```
Given Weight_in_kg, height_in_m:
    BMI = Weight_in_kg / ((height_in_m)^2)
    if BMI < 18.5:
        then Patient is underweight
          otherwise if 18.5 ≤ BMI < 25:
        then Patient is normal
           otherwise if 25 ≤ BMI < 30:
        then Patient is overweight
    otherwise if BMI > 30:
        then Patient is obese

```

信不信由你，这是我们的第一个“程序”(用引号括起来，因为你还不能在电脑上运行它)。无论如何，这种算法(也称为一系列步骤)有许多特征可以将它与人工智能区分开来。首先，关于定义患者体重状况的某些界限的参数没有变化。这些都是疾控中心明确规定的。另外，我们知道无论我们执行这个算法多少次，结果都不会改变。

用人工智能领域的技术制作的程序通常不会带有固定的参数。相反，人工智能程序将试图“学习”必要的参数，以优化实现某些最终目标。当我说“学习”时，我真的是指学习。人工智能的典型方法包括给一个人工智能程序一组训练数据，“告诉”程序优化一些指标，然后在测试数据上评估程序的性能，这些数据不是用来训练它的(基本上就像学生在学校接受的测试一样)。在我们之前的身体质量指数问题的背景下，解决这个问题的人工智能方法将涉及给人工智能程序一个数百(可能数千)名患者的列表，这些患者的体重、身高和最终身体质量指数状态(体重不足、正常、超重、肥胖)。通过训练过程，人工智能程序将尝试学习相关参数，以输出正确的重量类别。然后，我们可以在一组未用于训练程序的测试数据上评估程序的准确性。我们为什么要做这个测试步骤？以确保程序确实学会了在其看到的训练数据之外归纳其计算。图 [1-1](#Fig1) 突出显示了普通程序和人工智能程序之间的差异。

![../images/502243_1_En_1_Chapter/502243_1_En_1_Fig1_HTML.jpg](../images/502243_1_En_1_Chapter/502243_1_En_1_Fig1_HTML.jpg)

图 1-1

展示了普通程序和人工智能程序之间的主要区别。请注意人工智能程序中涉及的训练和测试数据

人工智能程序如何执行前面的例子的细节将在本书后面阐述，但是一些突出的概念可以从前面的场景中得到。首先，在一个人工智能程序中，程序本身试图根据我们指定的一些标准来提高它的性能。第二，在一个人工智能程序中，由于我们没有指定参数，我们应该使用某种形式的训练和测试数据来确保程序学习如何优化主要指标，并在学习过程中推广它已经看到的数据。如果我们窥视人工智能程序学习的东西，我们不一定能保证它已经形成了与我们类似的决策过程。我们所知道的是，相对于我们的指标，它的表现相当准确。

让我们想一个不那么做作的例子来说明人工智能可能被用在什么地方。如何通过脑部扫描来检测病人是否有肿瘤？对于放射科医生来说，这是一项简单的任务。从 PACS 系统调出核磁共振图像，在扫描中寻找异常。好的，现在我如何检测 1000 个病人的扫描结果中是否有肿瘤？嗯，把这项工作交给一个放射科医生，甚至一个放射科医生团队，仍然意味着这项任务需要一段时间才能完成。为了加快速度，我们可以考虑用一个程序来做这件事。但是我们如何向程序指定如何寻找肿瘤呢？我们不一定能从几年的医学院和住院医师培训中获得经验。我们也不能采用早期的非人工智能方法，因为每个患者在 MRI 系列中可能不会在完全相同的位置上有脑肿瘤，也不会所有肿瘤看起来都一样(事实上，MRI 可能是用不同的成像参数拍摄的，等等。).因此，我们剩下的唯一真正的解决方案是用人工智能来完成这项任务。

有一些人工智能算法(称为神经网络)可以学习如何在扫描中检测对象，甚至完成更复杂的任务，如分割(即，准确标记图像中的哪些像素/体素对应于某个对象，在我们的情况下，是脑瘤)。然而，过程将是相同的。我们将使用一些带注释的数据 MRI 扫描(即，如果存在肿瘤，扫描会准确显示 MRI 切片的哪些部分包含肿瘤)，对算法之前没有见过的一些数据进行测试，以评估其准确性，然后在我们的 1000 张图像上运行经过训练的 AI 程序(通常可互换地称为“模型”)。同样，我们不知道人工智能是如何完成这个过程的，也不知道它到底会寻找什么(尽管我们可以用一些技巧来可视化程序的一些部分)，但我们知道它在一定程度上完成了自己的工作(由它在测试数据和 1000 次扫描中的表现决定)。

现在我们已经对什么是人工智能和什么不是人工智能有了基本的了解，让我们澄清一下人工智能的正式定义。大致来说，人工智能只是由机器展示的智能。它包含了大部分的过程，包括学习/训练阶段的一些模式，然后测试/评估结果程序。我们最终会看到，目前被称为人工智能的东西并不是你我所认为的真正的智能。相反，在大多数适用于医学成像和研究的情况下，人工智能可以被视为高级模式识别。在前面的例子中，我们的人工智能程序的任务是识别身体质量指数和体重分类的模式，并在核磁共振成像中找到指示肿瘤存在的模式。然而，现有的人工智能形式可以执行更复杂的任务，如处理人类语音，创建类似人类的对话，玩人类游戏，等等。迄今为止，这一领域的进展集中在非常好地执行特定任务上；然而，它在开发一种可推广到特定任务之外的机器智能方面没有取得很大进展(然而，谁知道未来会发生什么)。

好的，这就是 AI。现在什么是机器学习？机器学习可以定义为一组随着经验而变得更好的算法。当我说“经验”时，我的意思是当暴露于足够的训练数据时，程序本身的结果将根据一些最终的度量标准(在大多数情况下，这是某种形式的准确性)而改变和优化。机器学习是人工智能的一个子集。常见的机器学习算法包括线性回归(是的，这种类型的线性回归，您可以在 excel 中使用，以对一些数据进行最佳拟合)。在线性回归的情况下，我们不一定要区分训练数据和测试数据；然而，无论给我们什么样的数据，我们都试图得到最佳的猜测。通过特定的算法，程序可以在报告“足够好”的结果(可能是也可能不是最适合数据的最佳线)之前，通过多次迭代反复完善该猜测。其他机器学习算法包括决策树(在给定输入的一些属性的情况下，它将有效地制作流程图，以确定给定输入属于哪个类别)、聚类算法(试图将点分组为预先指定数量的组)和基于实例的算法(试图根据未知点与先前训练数据的接近程度来预测标签)。

深度学习，另一个你可能听说过的术语，完成和机器学习一样的任务；然而，它使用了一套特定的算法，其中包括使用人工神经元，这些人工神经元的工作方式与我们自己的神经元类似。正如我们身体中的单个神经元具有动作电位的行为一样，这些人工神经元也是如此。这些人工神经元相互连接，因为一个神经元的输出输入到另一个神经元的输入，导致多组神经元(称为层)的信号积累。网络的层数越多，它就变得越“深入”,就越有能力从训练数据中学习更多重要信息，从而使它能够在训练数据集之外进行归纳。还有另一种称为自然语言处理(NLP)的深度学习子集，可以帮助计算机处理、解释和生成文本数据。深度学习算法包含了当今人工智能的大部分主要进展(或者至少是最常被谈论的进展)。由于神经网络的多功能性和我们现在可以获得的巨大计算能力(与二十年前相比)，深度学习算法对工业和研究变得非常有用，有助于从图像中检测物体、为类似人类的对话生成文本等任务。这些算法如图 [1-2](#Fig2) 所示。

![../images/502243_1_En_1_Chapter/502243_1_En_1_Fig2_HTML.jpg](../images/502243_1_En_1_Chapter/502243_1_En_1_Fig2_HTML.jpg)

图 1-2

人工智能概述以及机器学习和深度学习领域的算法示例

深度学习和机器学习的共同点是问题的构造方式。学习算法可以分为有监督的和无监督的(还有一些额外的类别，但与本书无关)。

监督算法要求人类提供训练数据本身的标签。在我们的身体质量指数示例中，我们必须为给定的个人提供一个体重等级标签来训练网络并评估其准确性。监督算法通常涉及任何分类任务(例如，要求程序确定一个人属于哪个体重等级)或回归任务(例如，要求对某组数据的最佳拟合线是什么)。

无监督算法是不需要对数据点进行任何单独标注的算法。相反，我们要求程序本身为我们的训练数据中的单个数据点进行分组。例如，如果我要重新构建身体质量指数问题，而是要求程序将每个人分为四个一般组，而不给出任何关于这些组可能是什么的实际输入，这将是一个无监督的学习任务。另一种类型的无监督学习任务被称为降维，它实际上是要求程序确定给定数据中最重要的特征是什么，这将允许我们解释数据中的所有差异。

然而，所有这些任务都需要数据来实际让算法很好地执行(回想一下，机器学习算法基于它可用的训练数据迭代地改进)。然而，对于其中的一些算法(特别是神经网络)，训练好的模型需要的数据量可能很大(有些人甚至会说“大”)，这就给我们带来了下一个问题:什么是“大数据”？

很难确定“大数据”本身的确切定义，甚至很难为该术语找到一个统一的定义。然而，有一点是清楚的，那就是如今它被更普遍地使用。随着互联网上信息财富的增加，以及各个组织收集越来越多的关于其用户和访问者的数据点，研究人员、程序员和分析师应该开始弄清楚可以从数百万个人数据点中收集到什么样的见解。实际上，“大数据”及其相关科学“数据科学”围绕着试图通过对大型数据集执行操作来寻找噪音中的信号，以提取有用的见解。数据科学运营根本不需要在分析中采用人工智能方法，而是可以从均值、中值、范围、百分位数等统计指标中提取有意义的结果。然而，数据科学和人工智能方法学配合得很好，因为数据科学专注于从看似不可理解的数据中提取信息，而人工智能的子集专注于做同样的事情，但使用了一些更好的迭代学习方法。结合起来，这两个世界产生了高级模式识别程序，在各种场景中表现良好。

所以现在你知道 AI，机器学习(ML)，深度学习(DL)，大数据/数据科学实际上是什么意思了。我们现在将继续看看从人工智能的角度处理问题实际上是什么样子，以及当我们计划培训、评估和部署我们开发的最终程序时，我们需要考虑哪些因素。

### 人工智能考虑因素

嗯，你需要的一件事是对你试图回答的确切问题有一个概念。讽刺的是，这需要问更多的问题。第一个是问你自己你通常如何(即，没有人工智能的帮助)解决这个问题。在此基础上，根据不同的案例参数确定该过程的变化程度，并查看该解决方案是否仍然有效。如果你能找到一个通用的方法，也许值得将你的人工智能问题简化为试图模拟这个过程。例如，在发现椎骨骨折的情况下，需要测量每个椎体的三个椎骨高度。这些高度之间的相对差异足以对骨折类型和严重程度进行分类。因此，显而易见的是，我们的 AI 可能也应该尝试做同样的事情，即，在成像研究中找到所有的椎体，并测量骨折检测所需的三个椎体高度。在这种情况下，我们用来训练 AI 的数据将是椎体的位置和每个椎体的高度。但是仅仅单独提供这些输入(即，对应于椎体的边界框位置的坐标和三个高度测量值的列表)仍然会产生关于这些高度应该来自哪里的不确定性。然而，如果我们训练神经网络来找到与形成测量高度的三条线相关联的六个关键点，我们就可以计算关键点之间的距离。总的来说，将一个问题从模糊的东西变成更具体和范围有限的东西可以帮助你决定一个更好的解决人工智能问题的方法。

当你对一个特定的问题应该是什么有了一个大致的概念后，你的下一步就是尝试找到可以帮助神经网络训练的数据。对于您需要的数据量，没有一个正确的答案；然而，看看以前在其他领域解决你正在尝试的问题的尝试是有帮助的。例如，我在最后一段中提到的脊椎骨折问题可以通过查看一组人工智能模型来解决，这些模型专注于确定照片中人类的位置，以及每个人的头、手、脚、臀部、躯干和膝盖的位置。事实证明，这类研究项目能够利用一种被称为“迁移学习”的概念(有效地使用另一个人工智能模型的训练部分)，将所需的训练样本数量从数千个大幅减少到数百个。这些数据也可以被扩充(即，以某种方式复制和操纵)以人工地产生更多的训练数据，这些训练数据模仿在对你可用的训练数据集中可能未被充分表示的其他条件(例如，在 MR 图像的情况下，你可能想要用不同亮度和对比度值的图像来扩充训练数据，以考虑成像参数的变化)。

保护数据集后，下一个任务是量化网络的性能。我将在本书的最后一章讨论“人工智能蛇油”的含义，但要预先警告的是，由于你的训练和测试数据集或你如何构建网络中存在的选择偏差，当准确率缺乏外部有效性时，很容易将一个真正高的准确率作为一项成就。此外，如果你处于考虑使用现有人工智能解决方案的位置，你应该预先警告一些供应商倾向于将术语“人工智能”作为一个流行词来使用，而不是真正使用机器学习或神经网络来产生他们的输出。

训练和部署你的网络也需要计算能力，这取决于你正在处理的任务。一些人工智能可以单独使用你的笔记本电脑进行训练。其他的将要求你以某种方式获得更高能力的计算资源。值得庆幸的是，对于大多数实验目的来说，有一些解决方案是免费的(在部署或需要更多资源时，需要花钱来托管)。一旦你的人工智能被训练，你还需要考虑它将如何被部署(例如，人工智能的最终用户将如何与它交互)。在医疗环境中，部署是一个很大的问题，因为您可能需要与许多系统进行交互，以便为您的最终用户创建简化的体验。此外，作为一种可能用于管理患者和医疗保健数据的工具，您需要探索 FDA 法规和法令在您潜在的基于人工智能的解决方案中的作用(并且应该在这方面咨询适当的专业人员)。

最后，也是最重要的，在开始训练或分发您的人工智能解决方案之前，应该解决对患者数据隐私和数据集中偏见的担忧。在某些情况下，可以从模型本身的输出中收集有关用于训练 AI 模型的底层数据集的信息。例如，如果你要创建一个人工智能驱动的聊天机器人，它通过与医疗保健人员的文本/电子邮件进行训练，神经网络可能会意外输出敏感的患者信息，因为人工智能有非零的可能性“看到”这些信息在执行其最终任务时是有价值的。此外，根据数据集中的偏差，应该注意的是，人工智能的输出反映了用于训练它的数据。如果您要创建一个检测皮肤黑色素瘤的应用程序，并且您的数据集主要由浅色皮肤的个体组成，那么您的网络输出很有可能会偏向于为浅色皮肤的人输出更准确的结果，而为深色皮肤的人输出不同的结果。因此，应注意尽可能平衡跨多个类别使用的数据集，这也将有助于实现较高的外部效度。

## 摘要

到目前为止，我们已经涵盖了 AI 实际上是什么(机器学习、深度学习算法等的通用描述符)以及它与普通程序的不同之处。我们还谈到了在提出基于人工智能的解决方案来解决你在临床环境中可能发现的问题/研究问题时，你应该记住的考虑因素。所有这些信息都可以在任何其他文章或书籍中找到；然而，在本书的其余部分，我们实际上将开始应用在这一章中学到的原则。

## 本书的其余部分…

如前所述，这本书不会让你对人工智能有一个笼统的、模糊的或“时髦的”理解。你实际上是在编码它，这将需要你苦读一些介绍性的和高水平的材料，这些材料通常可能与人工智能没有直接关系；然而，当考虑如何编程、实现或改编人工智能技术来解决你想要解决的问题时，这些材料会很有用。

因此，本书的下一章将关注这条道路的第一步:计算思维。具体来说，那一章将集中于算法，算法的分析，以及目前算法研究中一般主题的概述。那一章包括几个例子，这些例子将说明看似困难的问题实际上是如何通过对手头问题的独特见解来快速解决的。我们将讨论两个需要使用算法的主要问题:稳定匹配和活动选择。这些算法本身与人工智能的世界没有特别的关联；然而，它们确实有助于说明计算复杂性、运行时分析和正确性证明等主题，这些主题将在本书的后面出现。此外，他们将开始暗示通过计算思考问题的一般结构，表明有必要设计具体的、离散的和详细的程序来以可证明正确的方式解决问题。

在接下来的一章中，我们将深入到编程的世界中，向你展示对构建、编写和运行程序至关重要的概念。在那一章中，我们将实现一个二次公式求根器。虽然这个例子看起来有点不自然，但是变量、函数和类等概念将会被涵盖(这些也会在后面的章节中出现)。此外，我们将实现一种输入方法。包含二次方程列表的 csv 文件，让我们有机会弄清楚如何处理文件输入和输出。所有早期的讨论将主要在 Python 编程语言中进行，这是初学者开始编程和人工智能的首选语言。

之后的一章将从与建立计算机科学和编程的基本概念相关的弯路中抽身，转而关注特定的人工智能技术和学习算法。这一章，虽然并不意味着是对人工智能所有主题的详尽覆盖，但它旨在给出初学者应该能够在高水平上理解的突出和重要算法的概述。这些算法为什么实际工作背后的数学证明将被忽略(关于这个主题有几本书和在线课程)。相反，我们将专注于这些数学证明对于我们涵盖的人工智能算法的训练、测试和验证过程的实际意义。

之后的两章将涵盖从零开始构建的项目，包括人工智能在医学中的应用。具体来说，我们将编写一个机器学习管道，从篮球受伤的数据集预测急诊室入院情况，然后我们将制作深度神经网络，可以从胸部 x 光片预测肺炎。我们将遍历每个例子的代码，并一点一点地构建它，让您直观地感受到实现和调整这些人工智能技术以解决手头问题所需的工作量。

最后一章将集中讨论人工智能在医学上的意义。主要是讲 AI 在医疗领域的潜在使用案例和误区。在这里，我们将讨论患者数据隐私和 HIPAA 以及人工智能蛇油在医学中的故事(以及如何识别假冒人工智能产品的迹象)。我们还将讨论如何继续自学，以及如何解决未来程序员面临的一个常见问题:修复错误。

说了这么多，让我们继续第 2 章。